# ğŸ“± Invisible Deck â€“ React PWA

## _Phone Unlock Illusion / Magic Trick System Overview_

ğŸŒ Languages:

[English description](README.md)  
[Magyar leÃ­rÃ¡s](README.hu.md)

This is a **React + Vite + PWA** based mobile magic application that uses the illusion of unlocking a phone to instantly reveal the card named by the spectator.
The system automatically presents an iOS- or Android-themed unlocking experience, while the magician secretly enters the selected card during the process.

---

## ğŸ”¥ Main Features

- iOS-style **FaceID screen** + **6-digit PIN unlock**
- Android-style **4Ã—4 pattern lock**
- **Automatic platform detection** (based on User Agent)
- Hidden **Admin Panel** (long press bottom-right corner)
- Toggleable **HUD** (Android pattern debug overlay)
- **Force Mode** (iOS / Android / Auto)
- **FaceID debug mode**
- **Reset Defaults** (clears all settings)
- PWA installable as a home screen icon, offline support

---

## ğŸ–¥ Project Structure

```
src/
  app/
    App.tsx
  admin/
    AdminPanel.tsx
  android/
    AndroidPattern.tsx
  ios/
    FaceIDOverlay.tsx
    IOSPasscode.tsx
  settings/
    settings.types.ts
    settings.context.tsx
    settings.storage.ts
    useAdminGesture.ts
  ui/
    LockScreen.tsx
    Reveal.tsx
  main.tsx
  index.css
public/
  manifest.webmanifest
  sw.js
```

---

## ğŸ” Unlocking Logic

### iOS Flow

#### 1) FaceID overlay

- iOS-like animation
- After 1.2 seconds â†’ **"Face ID failed"**
- Automatically or via button proceeds to the PIN screen

#### 2) PIN code (this inputs the card)

| PIN position  | Meaning                                       |
| ------------- | --------------------------------------------- |
| **1st digit** | **Suit** â€“ 1=â™¥, 2=â™¦, 3=â™£, 4=â™  (5â€“9, 0 mapped) |
| **2ndâ€“3rd**   | **Rank** â€“ 01..13 â†’ A..K (mod 13 supported)   |
| **4thâ€“6th**   | Any digits (looks like a real PIN)            |

---

### Android Flow

#### 4Ã—4 Pattern lock

The magician draws a pattern â†’ the card is determined from it.

#### Suit

Determined by the **quadrant of the starting point**:

| Quadrant     | Suit |
| ------------ | ---- |
| Top-left     | â™¥    |
| Top-right    | â™¦    |
| Bottom-left  | â™£    |
| Bottom-right | â™     |

#### Rank

- Rank = `(number of visited points - 1) mod 13` â†’ **A..K**
- Minimum 2 points required

---

## ğŸƒ Card Display

- Realistic playing card UI
- Top-left + bottom-right corner indices
- Large center suit icon
- "Lock" button â†’ returns to lock screen

---

## ğŸ›  Admin Panel (hidden features)

### Access

**Lock Screen â†’ bottom-right corner â†’ long press for 2 seconds**

### Features:

- **Show HUD** (Android)
- **UI mode selection**:
  - auto
  - iOS
  - Android
- **FaceID debug mode**
- **Reset Defaults**
  - clears localStorage
  - restores default settings
  - refreshes the app immediately

---

## âš™ Settings Architecture

### Settings object

```ts
interface Settings {
  hud: boolean;
  forceMode: "auto" | "ios" | "android";
  debugFaceID: boolean;
  uiLang?: UiLang; // <-- AI generated languag files
}

export type UiLang = "hu" | "en" | "es" | "pt" | "pl" | "de" | "fr" | "it";
```

### Storage

- **SettingsContext** (React Context + Reducer)
- Save â†’ localStorage
- Load â†’ on app startup (`loadSettings()`)

### Supported actions:

- `SET_HUD`
- `SET_FORCE_MODE`
- `SET_DEBUG_FACEID`
- `SET_ALL`
- `RESET_DEFAULTS`

---

## ğŸ¯ User Experience Summary

1. **Lock Screen**
2. Spectator names a card
3. You "unlock" the phone â†’ secretly input the card
4. iOS:
   - FaceID â†’ PIN â†’ card
5. Android:
   - pattern â†’ card
6. "Lock" â†’ back to start

The spectator sees what appears to be a real phone unlocking process.

---

## ğŸ“¦ Running

### Development

```sh
npm install
npm run dev
```

### Build

```sh
npm run build
npm run preview
```

### Installable PWA

- Includes manifest and service worker
- Supports offline use
- Can be installed on iOS/Android home screens

## Demo

[Invisible Deck Demo](https://pikk7.github.io/InvisibleDeck/)

After opening the webpage, open the menu and tap **Add to Home Screen**, then **Install**, then again **Install**.

You will get the app named Invisible Deck.

## Translations

Translation files were generated by Copilot.

## Test

Android 16
One UI 8
Samsung Galaxy S24 Ultra
